(this["webpackJsonpreact-infinite-scroll"]=this["webpackJsonpreact-infinite-scroll"]||[]).push([[0],[,,,,,,,,,function(e,t){},,,function(e,t,a){"use strict";a.d(t,"HttpMethod",(function(){return n}));var n;a(9);!function(e){e.GET="GET",e.POST="POST"}(n||(n={}))},,,function(e,t,a){e.exports=a(29)},,,,,function(e,t,a){},function(e,t,a){},,,,function(e,t,a){},function(e,t,a){},,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),s=a.n(o),i=(a(20),a(21),a(1)),l=a(2),c=a(5),u=a(4),d=a(6),g=a(3),m=a(11),h=a.n(m),f=(a(25),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).currentIndex=0,a.countItems=function(){return a.props.values.length},a.handleScroll=function(){a.props.loadMore&&a.countItems()-a.currentIndex<(a.props.loadMoreItemsBuffer||10)&&a.props.loadMore.call(Object(g.a)(a))},a.renderItem=function(e,t){a.currentIndex=e;var n=a.props,o=n.values,s=n.renderCell,i=e%2?"item":"item even";return s?s.call(Object(g.a)(a),o,e,t):r.a.createElement("div",{key:t,className:i},r.a.createElement("code",null,e),r.a.createElement("h3",{className:"title"},o[e].name),r.a.createElement("p",null,r.a.createElement("span",null,"#"),o[e].id))},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.loadMore&&window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){this.props.loadMore&&window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){return r.a.createElement(h.a,{length:this.countItems(),type:"uniform",itemRenderer:this.renderItem,threshold:500})}}]),t}(r.a.PureComponent)),p=function(e,t,a){var n=t%2?"item":"item even",o=e[t];return r.a.createElement("div",{key:a,className:n},r.a.createElement("img",{key:t,src:o.image,alt:o.name,style:{backgroundColor:o.color}}),r.a.createElement("div",{className:"content"},r.a.createElement("h3",{className:"title",title:String(o.id)},o.name),r.a.createElement("code",null,t)))},v=function e(t,a,n,r){Object(i.a)(this,e),this.name=void 0,this.id=void 0,this.image=void 0,this.color=void 0,this.id=t,this.name=a,this.image=n,this.color=r},P=(a(26),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).hasNextPage=function(){return!!(a.state.results&&a.state.results.data&&a.state.results.data.Page.pageInfo.hasNextPage)},a.getNextPage=function(){return a.state.results&&a.state.results.data&&a.state.results.data.Page.pageInfo.hasNextPage?a.state.results.data.Page.pageInfo.currentPage+1:0},a.getCurrentPage=function(){return a.state.results&&a.state.results.data&&a.state.results.data.Page.pageInfo.hasNextPage?a.state.results.data.Page.pageInfo.currentPage:0},a.updateResults=function(e){if(!a.state.results.data||!e.data)throw Error("Error loading data");var t=a.state.results.data.Page.media,n=e.data.Page.media;return{data:{Page:{media:t.concat(n),pageInfo:e.data.Page.pageInfo}}}},a.loadData=function(){var e=a.props.dataProvider,t=a.getNextPage();a.setState({loading:!0}),e.fetchData(t).then((function(e){if(e.error||!e.json)throw Error("Failed to fetch json data");var n=t<=1?e.json:a.updateResults(e.json);a.setState({results:n,loading:!1})}))},a.loadMoreData=function(){a.state.loading||a.loadData()},a.getValues=function(e){return e.map((function(e){return new v(e.id,e.title.english||e.title.native,e.coverImage.medium,e.coverImage.color)}))},a.state={loading:!1,results:{}},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this.state,t=e.results;if(e.loading&&0===this.getCurrentPage())return r.a.createElement("div",{className:"loading"},r.a.createElement("div",{className:"spinner"}),r.a.createElement("p",null,"Loading"));if(!t||!t.data||!t.data.Page||!t.data.Page.media)return r.a.createElement("div",{className:"error"},r.a.createElement("p",null,"Sorry, no data available"));var a=this.getValues(t.data.Page.media);return r.a.createElement("div",{className:"list-view-container"},r.a.createElement(f,{values:a,renderCell:p,loadMore:this.loadMoreData,loadMoreItemsBuffer:10}))}}]),t}(r.a.PureComponent)),y=a(7),E=a.n(y),b=a(12),j=function(){function e(){Object(i.a)(this,e)}return Object(l.a)(e,null,[{key:"Post",value:function(e,t,a){var n,r;return E.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,E.a.awrap(fetch(e,{method:b.HttpMethod.POST,body:a,headers:t}));case 3:return n=o.sent,o.next=6,E.a.awrap(n.json());case 6:return r=o.sent,o.abrupt("return",{json:r});case 10:return o.prev=10,o.t0=o.catch(0),o.abrupt("return",{json:void 0,error:!0,errorMessage:o.t0});case 13:case"end":return o.stop()}}),null,null,[[0,10]])}}]),e}(),I=function(){function e(t,a){Object(i.a)(this,e),this.endpoint=void 0,this.gqlQuery=void 0,this.endpoint=t,this.gqlQuery=a}return Object(l.a)(e,[{key:"fetchData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a={"Content-Type":"application/json"},n={page:t},r=e.QueryBody(this.gqlQuery,n);return j.Post(this.endpoint,a,r)}}]),e}();I.QueryBody=function(e,t){if(!e.loc)throw Error("Failed to get GraphQL document");var a=e.loc.source.body,n=I.Query(a,t);return JSON.stringify(n).replace(/\\n/g,"").replace(/\\t/g," ").replace(/\s\s+/g," ")},I.Query=function(e,t){return{query:e,variables:t}};var w=I,O=a(13),N=a(14);function k(){var e=Object(O.a)(["\n  query($page: Int!) {\n    Page(page: $page) {\n      pageInfo {\n        total\n        perPage\n        currentPage\n        lastPage\n        hasNextPage\n      }\n      media(sort: ID, isAdult: false) {\n        id\n        title {\n          romaji\n          english\n          native\n          userPreferred\n        }\n        coverImage {\n          extraLarge\n          large\n          medium\n          color\n        }\n      }\n    }\n  }\n"]);return k=function(){return e},e}var x=new w("https://graphql.anilist.co/",a.n(N)()(k())),M=function(){return r.a.createElement("div",{className:"App anilist"},r.a.createElement(P,{dataProvider:x}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[15,1,2]]]);
//# sourceMappingURL=main.bf6c02e3.chunk.js.map